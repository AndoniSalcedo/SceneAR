<html>
	<head>
		<meta charset="UTF-8" />
		<title>Escena AR</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-image-aframe.prod.js"></script>

		<script>
			AFRAME.registerComponent("occlusion", {
				schema: {
					type: "boolean",
					default: true,
				},

				init: function () {
					this.setOcclusion(this.data);
				},

				update: function () {
					console.log(this.data);
					this.setOcclusion(this.data);
				},

				setOcclusion: function (val) {
					const material = new THREE.MeshStandardMaterial({
						colorWrite: !val,
						color: 0xff0000,
					});

					this.el.object3D.traverse((obj) => {
						obj.material = material;
					});
				},
			});
		</script>
	</head>
	<body>
		<a-scene
			mindar-image="imageTargetSrc: ./skell.mind"
			vr-mode-ui="enabled: false"
			device-orientation-permission-ui="enabled: false"
			inspector=""
			keyboard-shortcuts=""
			screenshot=""
		>
			<a-assets>
				<a-asset-item
					src="./assets/plant/potted_plant_04_1k.gltf"
					id="plant"
				>
				</a-asset-item
			></a-assets>
			<a-assets>
				<a-asset-item
					src="./assets/ceramic/ceramic_vase_02_1k.gltf"
					id=""
				>
				</a-asset-item
			></a-assets>
			<a-camera
				position="0 0 0"
				look-controls="enabled: false"
				camera=""
				rotation=""
				wasd-controls=""
				data-aframe-inspector-original-camera=""
			></a-camera>

			<a-entity mindar-image-target="">
				<!-- 				<a-box
					position="0 1 0"
					scale="1 1 1"
					material="color:orange;opacity:0.5"
					geometry
					occlusion
				></a-box>
 -->
				<a-entity
					id="plant_"
					gltf-model="./assets/plant/potted_plant_04_1k.gltf"
					position="2.49675 -2.29721 -1.75829"
					rotation="5 0 0"
					scale="3 3 3"
				></a-entity>
				<a-entity
					id="ceramic_"
					gltf-model=""
					position="0.7 1.2 0"
					rotation="90 0 0"
					scale="2 2 2"
				></a-entity>
			</a-entity>
			<div class="a-loader-title" style="display: none">Escena AR</div>
			<div class="a-loader-title" style="display: none">
				Escena AR
			</div></a-scene
		>
	</body>
</html>
